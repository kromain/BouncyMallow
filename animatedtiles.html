
<!DOCTYPE html>

<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<title>HTMLTile testbed</title>
<style type="text/css">
body, html {
  margin: 0px;
  width: 100%;
  height: 100%;
  overflow: hidden;
}
#layer0 {
  z-index: 0;
}
#layer1 {
  z-index: 1;
}
#layer2 {
  z-index: 2;
}
#controls {
  position: absolute;
  background: rgba(0, 0, 0, 0.85);
  width: 200px;
  top: 25px;
  left: 25px;
  padding: 10px;
  border-radius: 5px;
  border: 2px solid white;
  color: white;
}
#controls h2 {
  margin: 0px;
  border-bottom: 1px solid white;
}
#controls input {
  width: 100px;
}
</style>
<script src="scripts/gl-matrix-min.js" type="text/javascript"></script>
<script src="scripts/tiledemo.js" type="text/javascript"></script>
<script src="scripts/query-args.js" type="text/javascript"></script>
<script src="scripts/htmltile-shim.js" type="text/javascript"></script>
<script type="text/javascript">
  function init() {
    initTextures();

    extractQueryArgs();
    if (queryArgs.autopauseresume != undefined)
      window.setTimeout(autoPauseResumeTiles, queryArgs.autopauseresume * 1000);
    if (queryArgs.usewebgl != undefined)
      document.getElementById('usewebgl').checked = queryArgs.usewebgl;
    if (queryArgs.animatetiles != undefined)
      document.getElementById('animatetiles').checked = queryArgs.animatetiles;
    if (queryArgs.destroytimeout != undefined)
      document.getElementById('destroytimeout').value = queryArgs.destroytimeout;
    if (queryArgs.tilecount != undefined)
      document.getElementById('tilecount').value = queryArgs.tilecount;

    if (queryArgs.tilewidth != undefined)
      tileWidth = queryArgs.tilewidth;
    if (queryArgs.tileheight != undefined)
      tileHeight = queryArgs.tileheight;

    if (queryArgs.showcontrols != undefined && !queryArgs.showcontrols)
      document.getElementById('controls').style.display = "none";

    if (queryArgs.showfps != undefined)
      showFPSCounter = queryArgs.showfps;

    registerHTMLTileShimIfNeeded();

    start();
  }

  function initTextures () {
    textures = [
      '/tiles/eventstest/index.html',
//      '/tiles/animationtest/index.html',
      'http://www.yahoo.co.jp',
      'https://www.google.com',
      'http://24.media.tumblr.com/cfa55f70bbc5ce545eed804fa61a9d26/tumblr_mfpmmdCdWA1s1r5leo1_500.gif',
      // '/tiles/videotest/index.html?autoplay=1',
      // '/tiles/unresponsivetest/index.html',
      // '/tiles/charttest/index.html',
    ];
  }

  function autoPauseResumeTiles() {
    var pauseTilesCheckbox = document.getElementById('pausetiles');
    pauseTilesCheckbox.checked = !pauseTilesCheckbox.checked;
    // modifying the checked property doesn't actually trigger the onchange handler
    toggleTilesPauseResume();
    window.setTimeout(autoPauseResumeTiles, queryArgs.autopauseresume * 1000);
  }
</script>
</head>

<body onload="init()">
<div id="canvas_wrap">
  <div id="layer0">
    <canvas id="example" width="1920" height="1080">
      If you're seeing this your web browser doesn't support the &lt;canvas>&gt; element. Ouch!
    </canvas>
  </div>
  <div id="layer1">
  </div>
  <div id="layer2">
    <div id="controls">
    <h2>Controls</h2>
    <table>
    <tr>
      <td>Tiles:</td>
      <td><input id="tilecount" type="number" min="0" max="3000" step="1" value="4" /></td>
    </tr>
    <tr>
      <td>Animate Tiles:</td>
      <td><input id='animatetiles' type="checkbox" checked="true" /></td>
    </tr>
    <tr>
      <td>Pause Tiles:</td>
      <td><input id='pausetiles' type="checkbox" /></td>
    </tr>
    <tr>
      <td>Destroy timeout:</td>
      <td><input id="destroytimeout" type="number" min="1" max="100" step="1" value="1000" /></td>
    </tr>
    <tr>
      <td>Focus test:</td>
      <td><input id='focustile' type="checkbox" /></td>
    </tr>
    <tr>
      <td>Click test:</td>
      <td><input id="clicktile" type="button" value="Click me" /></td>
    </tr>
    <tr>
      <td>Use WebGL:</td>
      <td><input id='usewebgl' type="checkbox" /></td>
    </tr>
    </table>
  </div>
  </div>
</div>
</body>

</html>
